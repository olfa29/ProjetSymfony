var villes = {
    "Paris": { "lat": 48.852969, "lon": 2.349903 },
    "Brest": { "lat": 48.383, "lon": -4.500 },
    "Quimper": { "lat": 48.000, "lon": -4.100 },
    "Bayonne": { "lat": 43.500, "lon": -1.467 },
    "Kabul": { "lat": 34.53333, "lon": 69.16667 },
    "Tirana": { "lat": 41.32611, "lon": 19.81611 },
    "Algiers": { "lat": 36.75333, "lon": 3.04194 },
    "Pago Pago": { "lat":-14.27944, "lon":-170.70056},
    "Andorra la Vella": { "lat": 42.50583, "lon": 1.52167},
    "Luanda": { "lat": -8.83833, "lon": 13.23444 },
    "Saint John's": { "lat":17.11667, "lon": -61.84556 },
    "Buenos Aires": { "lat": -34.60333, "lon": -58.38167},
    "Yerevan": { "lat":40.18333, "lon": 44.51667},
    "Oranjestad": { "lat": 12.52389, "lon":-70.02639 },
    "Canberra": { "lat": -35.30806, "lon": 149.12444 },
    "Vienna": { "lat": 48.20833, "lon":16.37306 },
    "Baku": { "lat":40.39528, "lon": 49.88222 },
    "Nassau": { "lat": 25.06000, "lon": -77.34500},
    "Manama": { "lat": 26.21833, "lon": 50.59833},
    "Dhaka": { "lat":23.71056, "lon":90.40722},
    "Bridgetown": { "lat":13.10583, "lon": -59.61306},
    "Minsk": { "lat": 53.90028, "lon":27.56694 },
    "Brussels": { "lat":50.84889, "lon":4.35028 },
    "Belmopan": { "lat": 17.25139, "lon": -88.76694},
    "Porto-Novo": { "lat": 6.49722, "lon": 2.43333 },
    "Thimphu": { "lat":27.46667, "lon": 89.64167 },
    "La Paz": { "lat": -16.50000, "lon":-68.15000 },
    "Sarajevo": { "lat": 43.85639, "lon": 18.41306 },
    "Gaborone": { "lat":-24.65361, "lon": 25.90861 },
    "Brasilia": { "lat": -15.78083, "lon": -47.92917 },
    "Road Town": { "lat": 18.43139, "lon":-64.62306 },
    "Bandar Seri Begawan": { "lat":4.89139, "lon":114.94222},
    "Sofia": { "lat": 42.69917, "lon":23.32250},
    "Ouagadougou": { "lat": 12.35722, "lon":-1.53528 },
    "Bujumbura": { "lat":-3.38333, "lon": 29.36667 },
    "Phnom Penh": { "lat": 11.55972, "lon": 104.91750},
    "Yaounde": { "lat":3.86667, "lon":11.51667},
    "Ottawa": { "lat": 45.41694, "lon":-75.70000 },
    "Praia": { "lat": 14.92083, "lon": 149.12444 },
    "George Town": { "lat": 19.30333, "lon":-81.24028 },
    "Bangui": { "lat":4.36111, "lon": 18.55583 },
    "N'Djamena": { "lat": 12.10528, "lon":15.04444},
    "Santiago": { "lat": -33.46944, "lon": -70.64306},
    "Beijing": { "lat":39.91389, "lon":116.39167},
    "Bogota": { "lat":4.59806, "lon": -74.07583},
    "Moroni": { "lat": -11.75000, "lon":43.20000 },
    "Brazzaville": { "lat":-4.26778, "lon":15.29194 },
    "San Jose": { "lat": 9.92500, "lon":-84.08333},
    "Brussels": { "lat":50.84889, "lon":4.35028 },
    "Belmopan": { "lat": 17.25139, "lon": -88.76694},
    "Porto-Novo": { "lat": 6.49722, "lon": 2.43333 },
    "Thimphu": { "lat":27.46667, "lon": 89.64167 },
    "La Paz": { "lat": -16.50000, "lon":-68.15000 },
    "Sarajevo": { "lat": 43.85639, "lon": 18.41306 },
    "Gaborone": { "lat":-24.65361, "lon": 25.90861 },
    "Brasilia": { "lat": -15.78083, "lon": -47.92917 },
    "Road Town": { "lat": 18.43139, "lon":-64.62306 },
    "Bandar Seri Begawan": { "lat":4.89139, "lon":114.94222},
    "Sofia": { "lat": 42.69917, "lon":23.32250},
    "Ouagadougou": { "lat": 12.35722, "lon":-1.53528 },
    "Bujumbura": { "lat":-3.38333, "lon": 29.36667 },
    "Phnom Penh": { "lat": 11.55972, "lon": 104.91750},
    "Yaounde": { "lat":3.86667, "lon":11.51667},
    "Ottawa": { "lat": 45.41694, "lon":-75.70000 },
    "Praia": { "lat": 14.92083, "lon": 149.12444 },
    "George Town": { "lat": 19.30333, "lon":-81.24028 },
    "Bangui": { "lat":4.36111, "lon": 18.55583 },
    "N'Djamena": { "lat": 12.10528, "lon":15.04444},
    "Santiago": { "lat": -33.46944, "lon": -70.64306},
    "Beijing": { "lat":39.91389, "lon":116.39167},
    "Bogota": { "lat":4.59806, "lon": -74.07583},
    "Moroni": { "lat": -11.75000, "lon":43.20000 },
    "Brazzaville": { "lat":-4.26778, "lon":15.29194 },
    "San Jose": { "lat": 9.92500, "lon":-84.08333},
    "Yamoussoukro": { "lat":6.81667, "lon":-5.28333 },
    "Zagreb": { "lat":45.81250, "lon": 15.97778},
    "Havana": { "lat": 23.13333, "lon": -82.38333 },
    "Nicosia": { "lat":35.16889, "lon": 33.35917 },
    "Prague": { "lat": 50.08333, "lon":14.41667 },
    "Kinshasa": { "lat": -4.32500, "lon": 15.32222 },
    "Copenhagen": { "lat":55.67611, "lon": 12.56833 },
    "Djibouti": { "lat": 11.58750, "lon": 43.14556 },
    "Roseau": { "lat": 15.30139, "lon":-61.38833 },
    "Santo Domingo": { "lat":18.46667, "lon":-69.95000},
    "Dili": { "lat": -8.55000, "lon":125.58333},
    "Quito": { "lat": -0.21861, "lon":-78.51667 },
    "	Cairo": { "lat":30.04167, "lon": 31.23528 },
    "San Salvador": { "lat":13.69000, "lon": -89.19000},
    "Malabo": { "lat":3.75000, "lon":8.78333},
    "Asmara": { "lat": 15.33278, "lon":38.92639 },
    "Tallinn": { "lat": 59.43722, "lon":24.75361 },
    "Addis Ababa": { "lat": 9.02639, "lon":38.74694 },
    "Stanley": { "lat":-51.69222, "lon":-57.85889  },
    "Torshavn": { "lat": 62.01806, "lon":-6.77167},
    "Suva": { "lat": -18.14167, "lon":178.44194},
    "	Helsinki": { "lat":60.17083, "lon":24.93750},
    "Cayenne": { "lat":4.92278, "lon": -52.32694},
    "Papeete": { "lat": -17.53500, "lon":-149.56667 },
    "Libreville": { "lat":0.39000, "lon":9.45444 },
    "Banjul": { "lat": 13.45306, "lon":-16.57750},
    "	T'bilisi": { "lat": 41.70944, "lon": 44.79222 },
    "	Berlin": { "lat": 52.50056, "lon": 13.39889 },
    "Accra": { "lat": 5.55500, "lon":-0.19722},
    "Athens": { "lat": 37.98722, "lon":23.72750},
    "Nuuk": { "lat": 64.17500, "lon": -51.73889},
    "Basse-Terre": { "lat": 15.99583, "lon": -61.72917 },
    "	Guatemala": { "lat": 14.61333, "lon": -90.53528 },
    "St. Peter Port": { "lat":49.45556, "lon":-2.53667},
    "Conakry": { "lat":9.50917, "lon": -13.71222},
    "Bissau": { "lat": 11.86611, "lon": -15.60000},
    "Georgetown": { "lat":6.80000, "lon": -58.16667 },
    "Port-au-Prince": { "lat": 18.53861, "lon": -72.33639},
    "Tegucigalpa": { "lat":14.08333, "lon": -87.21667},
    "Budapest": { "lat": 47.47194, "lon":19.05028 },
    "Reykjavik": { "lat": 64.13333, "lon": -21.93333 },
    "New Delhi": { "lat": 28.63278, "lon":77.21972},
    "Jakarta": { "lat":-6.20278, "lon": 106.84944},
    "Tehran": { "lat": 35.69056, "lon": 51.43444 },
    "Baghdad": { "lat": 33.32611, "lon":44.42111 },
    "Dublin": { "lat":53.34778, "lon": -6.25972 },
    "Jerusalem": { "lat": 31.76944, "lon": 35.21306 },
    "	Rome": { "lat": 41.89250, "lon": 12.48250 },
    "Kingston": { "lat": 17.98333, "lon": -76.80000 },
    "Amman": { "lat":31.95806, "lon":35.93528},
    "	Astana": { "lat": 51.16667, "lon":71.43333},
    "Nairobi": { "lat": -1.28333, "lon": 36.81667 },
    "	Tarawa": { "lat":1.44028, "lon": 173.08056 },
    "	Kuwait": { "lat": 29.378586, "lon": 47.990341},
    "Beirut": { "lat":33.88917, "lon": 35.50000},
    "Tripoli": { "lat":32.87222, "lon":13.19611},
    "Tunis": { "lat": 36.80000, "lon": 10.18333
},
    "Ankara": { "lat": 39.91944, "lon":32.85417 },
};
 var markers= [];

      // On initialise la latitude et la longitude de Paris (centre de la carte)
      var lat = 48.852969;
      var lon = 2.349903;
      var macarte = null;
      markerClusters = L.markerClusterGroup(); // Nous initialisons les groupes de marqueurs
      // Fonction d'initialisation de la carte
      function initMap() {
          // Créer l'objet "macarte" et l'insèrer dans l'élément HTML qui a l'ID "map"
          macarte = L.map('map').setView([lat, lon], 11);
          // Leaflet ne récupère pas les cartes (tiles) sur un serveur par défaut. Nous devons lui préciser où nous souhaitons les récupérer. Ici, openstreetmap.fr
          L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
              // Il est toujours bien de laisser le lien vers la source des données
              attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
              minZoom: 1,
              maxZoom: 20
          }).addTo(macarte);

          // Nous définissons l'icône à utiliser pour le marqueur, sa taille affichée (iconSize), sa position (iconAnchor) et le décalage de son ancrage (popupAnchor)
              // var myIcon = L.icon({
                 // iconUrl: "{{asset('Imageicon/icon1.jpg')}}",
                // iconSize: [50, 50],
                 // iconAnchor: [25, 50],
                // popupAnchor: [-3, -76],
               // });
          // Nous parcourons la liste des villes
          for (ville in villes) {
              var marker = L.marker([villes[ville].lat, villes[ville].lon]);//.addTo(macarte);
          // Nous ajoutons la popup. A noter que son contenu (ici la variable ville) peut être du HTML
          marker.bindPopup(ville);
          markerClusters.addLayer(marker); // Nous ajoutons le marqueur aux groupes
              markers.push(marker); // Nous ajoutons le marqueur à la liste des marqueurs
             }    
           var group = new L.featureGroup(markers); // Nous créons le groupe des marqueurs pour adapter le zoom
             macarte.fitBounds(group.getBounds().pad(0.5)); // Nous demandons à ce que tous les marqueurs soient visibles, et ajoutons un padding (pad(0.5)) pour que les marqueurs ne soient pas coupés
            macarte.addLayer(markerClusters);
          
            macarte.addLayer(markerClusters);           	
         
          
      }
      window.onload = function(){
// Fonction d'initialisation qui s'exécute lorsque le DOM est chargé
initMap(); 
      };
      // Nous ajoutons un marqueur